<html>
    <head>
    </head>
    <body>
        <article class="repertoire" >
            <h1>Stats API data</h1>
            <button class="drilldownVloader" x-target="v_gene_usage_20201026_stats_api_data" x-data="https://raw.githubusercontent.com/marcoamarooliveira/sampledata/master/20201026_stats_api/gene_usage_response-v_call_unique_drilldown.json" x-gene="v">Load v_usage (2 repo, drilldown)</button>
            <button class="loader" x-target="v_gene_usage_20201026_stats_api_data" x-data="https://raw.githubusercontent.com/marcoamarooliveira/sampledata/master/20201026_stats_api/gene_usage_response-v_call_unique_drilldown.json" x-gene="v">Load v_usage (2 repo, no drilldown)</button>

            <div id="v_gene_usage_20201026_stats_api_data" class="iRVis" style="min-width: 310px; height: 400px; margin: 0 auto">Show D gene sample data from 2020/10/26</div>

            <button class="drilldownDloader" x-target="d_gene_usage_20201026_stats_api_data" x-data="https://raw.githubusercontent.com/marcoamarooliveira/sampledata/master/20201026_stats_api/gene_usage_response-d_call_unique_drilldown.json" x-gene="d">Load d_usage (2 repo, drilldown)</button>
            <button class="loader" x-target="d_gene_usage_20201026_stats_api_data" x-data="https://raw.githubusercontent.com/marcoamarooliveira/sampledata/master/20201026_stats_api/gene_usage_response-d_call_unique_drilldown.json" x-gene="d">Load d_usage (2 repo, no drilldown)</button>

            <div id="d_gene_usage_20201026_stats_api_data" class="iRVis" style="min-width: 310px; height: 400px; margin: 0 auto">Show D gene sample data from 2020/10/26</div>

            <button class="drilldownJloader" x-target="j_gene_usage_20201026_stats_api_data" x-data="https://raw.githubusercontent.com/marcoamarooliveira/sampledata/master/20201026_stats_api/gene_usage_response-j_call_unique_drilldown.json" x-gene="j">Load j_usage (2 repo, drilldown)</button>
            <button class="loader" x-target="j_gene_usage_20201026_stats_api_data" x-data="https://raw.githubusercontent.com/marcoamarooliveira/sampledata/master/20201026_stats_api/gene_usage_response-j_call_unique_drilldown.json" x-gene="j">Load j_usage (2 repo, no drilldown)</button>

            <div id="j_gene_usage_20201026_stats_api_data" class="iRVis" style="min-width: 310px; height: 400px; margin: 0 auto">Show J gene sample data from 2020/10/26</div>

            <button class="drilldownCloader" x-target="c_gene_usage_20201026_stats_api_data" x-data="https://raw.githubusercontent.com/marcoamarooliveira/sampledata/master/20201026_stats_api/gene_usage_response-c_call_unique_drilldown.json" x-gene="c">Load c_usage (2 repo, drilldown)</button>
            <button class="loader" x-target="c_gene_usage_20201026_stats_api_data" x-data="https://raw.githubusercontent.com/marcoamarooliveira/sampledata/master/20201026_stats_api/gene_usage_response-c_call_unique_drilldown.json" x-gene="c">Load c_usage (2 repo, no drilldown)</button>

            <div id="c_gene_usage_20201026_stats_api_data" class="iRVis" style="min-width: 310px; height: 400px; margin: 0 auto">Show C gene sample data from 2020/10/26</div>

        </article>

        <script src="lib/jquery.min.js"></script> 
        <script  src="dist/airrvisualization.js"></script>   

        <script>
            function redrawChart(gene, url, identifier){
                $.get(url, function(data){
                    //let d = new StatsResult(gene);
                    let d = window.airrvisualization.createGeneStatsResult(gene);
                    d.setRawResult(data);
                    //window.airrvisualization.setDebugLevel(0);
                    let chart = window.airrvisualization.createChart(window.airrvisualization.createProperties().setId(identifier).setXLabel("Category").setSort(true)).setResult(d).plot();
                });
            }
            function redrawDrilldownVChart(url, identifier){
                $.get(url, function(data){
                    //let d = new StatsResult(gene);
                    let d = window.airrvisualization.createVGeneStatsResult();
                    d.setDrilldown(true).setRawResult(data);
                    //window.airrvisualization.setDebugLevel(0);
                    let chart = window.airrvisualization.createChart(window.airrvisualization.createProperties().setId(identifier).setXLabel("Category")).setResult(d).plot();
                });
            }
            function redrawDrilldownDChart(url, identifier){
                $.get(url, function(data){
                    //let d = new StatsResult(gene);
                    let d = window.airrvisualization.createDGeneStatsResult().setDrilldown(true).setRawResult(data);
                    //window.airrvisualization.setDebugLevel(0);
                    let chart = window.airrvisualization.createChart(window.airrvisualization.createProperties().setId(identifier).setXLabel("Category")).setResult(d).plot();
                });
            }
            function redrawDrilldownJChart(url, identifier){
                $.get(url, function(data){
                    //let d = new StatsResult(gene);
                    let d = window.airrvisualization.createJGeneStatsResult().setDrilldown(true).setRawResult(data);
                    //window.airrvisualization.setDebugLevel(0);
                    let chart = window.airrvisualization.createChart(window.airrvisualization.createProperties().setId(identifier).setSort(true).setXLabel("Category")).setResult(d).plot();
                });
            }
            function redrawDrilldownCChart(url, identifier){
                $.get(url, function(data){
                    //let d = new StatsResult(gene);
                    let d = window.airrvisualization.createCGeneStatsResult().setDrilldown(true).setRawResult(data);
                    window.airrvisualization.setDebugLevel(0);
                    let chart = window.airrvisualization.createChart(window.airrvisualization.createProperties().setId(identifier).setXLabel("Category")).setResult(d).plot();
                });
            }
            $(function () {
                $('.loader').click(function(){
                    redrawChart($(this).attr('x-gene'), $(this).attr('x-data'), $(this).attr('x-target'));
                });
                $('.drilldownVloader').click(function(){
                    redrawDrilldownVChart($(this).attr('x-data'), $(this).attr('x-target'));
                });
                $('.drilldownDloader').click(function(){
                    redrawDrilldownDChart($(this).attr('x-data'), $(this).attr('x-target'));
                });
                $('.drilldownJloader').click(function(){
                    redrawDrilldownJChart($(this).attr('x-data'), $(this).attr('x-target'));
                });
                $('.drilldownCloader').click(function(){
                    redrawDrilldownCChart($(this).attr('x-data'), $(this).attr('x-target'));
                });
            });
        </script>
    </body>
</html>